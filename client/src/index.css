@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: hsl(0, 0%, 100%);
  --foreground: hsl(222.2, 84%, 4.9%);
  --card: hsl(0, 0%, 100%);
  --card-foreground: hsl(222.2, 84%, 4.9%);
  --popover: hsl(0, 0%, 100%);
  --popover-foreground: hsl(222.2, 84%, 4.9%);
  --primary: hsl(222.2, 47.4%, 11.2%);
  --primary-foreground: hsl(210, 40%, 98%);
  --secondary: hsl(210, 40%, 96%);
  --secondary-foreground: hsl(222.2, 47.4%, 11.2%);
  --muted: hsl(210, 40%, 96%);
  --muted-foreground: hsl(215.4, 16.3%, 46.9%);
  --accent: hsl(210, 40%, 96%);
  --accent-foreground: hsl(222.2, 47.4%, 11.2%);
  --destructive: hsl(0, 84.2%, 60.2%);
  --destructive-foreground: hsl(210, 40%, 98%);
  --border: hsl(214.3, 31.8%, 91.4%);
  --input: hsl(214.3, 31.8%, 91.4%);
  --ring: hsl(222.2, 84%, 4.9%);
  --radius: 0.5rem;
}

.dark {
  --background: hsl(222.2, 84%, 4.9%);
  --foreground: hsl(210, 40%, 98%);
  --card: hsl(222.2, 84%, 4.9%);
  --card-foreground: hsl(210, 40%, 98%);
  --popover: hsl(222.2, 84%, 4.9%);
  --popover-foreground: hsl(210, 40%, 98%);
  --primary: hsl(210, 40%, 98%);
  --primary-foreground: hsl(222.2, 47.4%, 11.2%);
  --secondary: hsl(217.2, 32.6%, 17.5%);
  --secondary-foreground: hsl(210, 40%, 98%);
  --muted: hsl(217.2, 32.6%, 17.5%);
  --muted-foreground: hsl(215, 20.2%, 65.1%);
  --accent: hsl(217.2, 32.6%, 17.5%);
  --accent-foreground: hsl(210, 40%, 98%);
  --destructive: hsl(0, 62.8%, 30.6%);
  --destructive-foreground: hsl(210, 40%, 98%);
  --border: hsl(217.2, 32.6%, 17.5%);
  --input: hsl(217.2, 32.6%, 17.5%);
  --ring: hsl(212.7, 26.8%, 83.9%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }

  /* Smooth theme transitions */
  body, 
  [class*="bg-"], 
  [class*="text-"], 
  [class*="border-"] {
    transition: background-color 150ms ease-out, 
                color 150ms ease-out, 
                border-color 150ms ease-out;
  }

  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  /* Force perfect centering for collapsed sidebar buttons */
  .sidebar-collapsed-button {
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Force spacing for expanded sidebar buttons */
  .sidebar-expanded .space-y-4 > * + * {
    margin-top: 1rem !important;
  }

  html.light {
    color-scheme: light;
  }
}

/* Enhanced Sidebar Animation System */
.sidebar-collapsed {
  width: 4rem;
  transition: width 150ms ease-out;
}

.sidebar-expanded {
  width: 16rem;
  transition: width 150ms ease-out;
}

.sidebar-text-fade {
  transition: opacity 150ms ease;
}

.sidebar-text-fade-out {
  opacity: 0;
}

.sidebar-text-fade-in {
  opacity: 1;
}





/* Remove duplicate sidebar rules */

/* Ensure collapsed state overrides any button width calculations */
.sidebar-collapsed {
  contain: layout style !important;
}

.sidebar-collapsed * {
  box-sizing: border-box !important;
}

/* Smooth morphing navigation buttons */
.sidebar-nav-button {
  height: 2.5rem !important;
  margin-bottom: 1rem !important;
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  transition: width 150ms ease-out, 
              padding 150ms ease-out,
              justify-content 150ms ease-out !important;
}

/* Hover effects for navigation buttons */
.sidebar-nav-button:hover:not(.bg-gray-800):not(.dark\\:bg-gray-200) {
  background-color: rgb(243 244 246) !important; /* gray-100 */
}

.dark .sidebar-nav-button:hover:not(.bg-gray-800):not(.dark\\:bg-gray-200) {
  background-color: rgb(31 41 55) !important; /* gray-800 */
}

/* Selected button hover effects */
.sidebar-nav-button.bg-gray-800:hover {
  background-color: rgb(55 65 81) !important; /* gray-700 */
}

.dark .sidebar-nav-button.dark\\:bg-gray-200:hover {
  background-color: rgb(229 231 235) !important; /* gray-200 */
}

/* Icon container for perfect centering */
.sidebar-nav-icon-container {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
  width: 1rem !important;
  height: 1rem !important;
}

.sidebar-nav-icon {
  display: block !important;
  margin: 0 !important;
}

/* Expanded state - full width rectangle */
.sidebar-expanded .sidebar-nav-button {
  width: 100% !important;
  justify-content: flex-start !important;
  padding: 0.5rem 0.75rem !important;
}

/* Collapsed state - centered square - FORCE ALL BUTTONS INCLUDING ACTIVE */
.sidebar-collapsed .sidebar-nav-button {
  width: 2.5rem !important;
  min-width: 2.5rem !important;
  max-width: 2.5rem !important;
  height: 2.5rem !important;
  padding: 0 !important;
  justify-content: center !important;
  align-items: center !important;
  margin-left: auto !important;
  margin-right: auto !important;
  display: flex !important;
}

/* NUCLEAR OPTION - Force ALL buttons to be square in collapsed state */
.sidebar-collapsed .sidebar-nav-button,
.sidebar-collapsed .sidebar-nav-button[data-state="active"],
.sidebar-collapsed .sidebar-nav-button.bg-gray-800,
.sidebar-collapsed .sidebar-nav-button.dark\\:bg-gray-200,
.sidebar-collapsed .sidebar-nav-button:hover,
.sidebar-collapsed .sidebar-nav-button:active,
.sidebar-collapsed .sidebar-nav-button:focus,
.sidebar-collapsed button[class*="bg-gray-800"],
.sidebar-collapsed button[class*="bg-gray-200"],
.sidebar-collapsed button[class*="shadow"],
.sidebar-collapsed .sidebar-nav-button[data-variant="default"],
.sidebar-collapsed button[data-variant="default"] {
  width: 2.5rem !important;
  min-width: 2.5rem !important;
  max-width: 2.5rem !important;
  height: 2.5rem !important;
  padding: 0 !important;
  justify-content: center !important;
  align-items: center !important;
  display: flex !important;
  margin-left: auto !important;
  margin-right: auto !important;
  flex-shrink: 0 !important;
  flex-grow: 0 !important;
}

/* Perfect icon centering in collapsed state */
.sidebar-collapsed .sidebar-nav-icon-container {
  width: 1rem !important;
  height: 1rem !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
}

/* Override any inline styles or computed styles */
.sidebar-collapsed .sidebar-nav-button * {
  margin: 0 !important;
  padding: 0 !important;
}

.sidebar-collapsed .sidebar-nav-button svg {
  margin: 0 !important;
  flex-shrink: 0 !important;
}

/* Icon positioning - fast transition */
.sidebar-nav-button svg {
  flex-shrink: 0 !important;
  transition: margin 150ms ease !important;
}

.sidebar-expanded .sidebar-nav-button svg {
  margin-right: 0.75rem !important;
}

.sidebar-collapsed .sidebar-nav-button svg {
  margin: 0 auto !important;
  position: relative !important;
  left: 0 !important;
  top: 0 !important;
}

/* Simplified text fade animations */
.sidebar-nav-text,
.sidebar-text-fade,
[data-testid="text-app-name"],
[data-testid="text-user-name"],
[data-testid="text-user-role"] {
  transition: opacity 150ms ease;
  white-space: nowrap;
  overflow: hidden;
}

.sidebar-expanded .sidebar-nav-text,
.sidebar-expanded .sidebar-text-fade,
.sidebar-expanded [data-testid="text-app-name"],
.sidebar-expanded [data-testid="text-user-name"],
.sidebar-expanded [data-testid="text-user-role"] {
  opacity: 1;
}

.sidebar-collapsed .sidebar-nav-text,
.sidebar-collapsed .sidebar-text-fade,
.sidebar-collapsed [data-testid="text-app-name"],
.sidebar-collapsed [data-testid="text-user-name"],
.sidebar-collapsed [data-testid="text-user-role"] {
  opacity: 0;
}

/* Toggle button fast appearance */
[data-testid="button-toggle-sidebar"] {
  transition: opacity 100ms ease !important;
}

.sidebar-expanded [data-testid="button-toggle-sidebar"] {
  opacity: 1 !important;
}

.sidebar-collapsed [data-testid="button-toggle-sidebar"] {
  opacity: 0 !important;
}

/* Container positioning */
.sidebar-nav-container {
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
}

/* Collapsed state - center all buttons vertically within their rows */
.sidebar-collapsed .sidebar-nav-container {
  align-items: center !important;
}

/* Ensure consistent positioning regardless of state */
.sidebar-nav-container > * {
  margin-top: 0 !important;
}

/* Perfect vertical alignment for collapsed buttons */
.sidebar-collapsed .sidebar-nav-container > * {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}



@media (max-width: 768px) {
  .sidebar-expanded, .sidebar-collapsed {
    width: 100%;
    position: fixed;
    z-index: 50;
    height: 100vh;
  }
}

/* Disable chart animations during theme switch */
@layer base {
  .recharts-cartesian-grid line,
  .recharts-reference-line line,
  .recharts-tooltip-wrapper {
    transition: none !important;
  }
}

/* Simplified scrollbar styling */
@layer base {
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }

  ::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #555;
  }
}
